<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title></title>
        <link>undefined</link>
        <description>undefined</description>
        <lastBuildDate>Sat, 24 Feb 2024 09:41:49 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>Joplin Pages Publisher</generator>
        <item>
            <title><![CDATA[如何修改docker0网桥地址]]></title>
            <guid>90fea9db360e45058218f13a6fc27016</guid>
            <pubDate>Tue, 23 Jan 2024 09:06:20 GMT</pubDate>
            <content:encoded><![CDATA[<p>第一步 删除原有配置：</p>
<div><pre class="hljs"><code>sudo<span class="hljs-built_in"> service </span>docker stop
sudo<span class="hljs-built_in"> ip </span>link <span class="hljs-built_in">set</span> dev docker0 down
sudo brctl delbr docker0
sudo iptables -t<span class="hljs-built_in"> nat </span>-F POSTROUTING</code></pre></div>
<p>第二步 创建新的网桥：</p>
<div><pre class="hljs"><code>sudo brctl addbr docker0
sudo<span class="hljs-built_in"> ip </span>addr <span class="hljs-built_in">add</span> 192.168.200.1/24 dev docker0
sudo<span class="hljs-built_in"> ip </span>link <span class="hljs-built_in">set</span> dev docker0 up</code></pre></div>
<p>第三步 配置Docker的文件：<br />
注意： 这里是 增加下面的配置</p>
<div><pre class="hljs"><code>vi /etc/docker/daemon.json
{
<span class="hljs-meta">...</span> <span class="language-javascript"><span class="hljs-string">"bip"</span>: <span class="hljs-string">"192.168.200.1/24"</span>,</span>
<span class="hljs-meta">...</span>
}</code></pre></div>
<p>第四步 重启主机：</p>
<div><pre class="hljs"><code><span class="hljs-attribute">sudo reboot</span></code></pre></div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[docker配置日志]]></title>
            <guid>5c6966d71cfd4b058dd1b15cb88818a6</guid>
            <pubDate>Mon, 15 Jan 2024 08:28:10 GMT</pubDate>
            <content:encoded><![CDATA[/etc/docker/daemon.json<br />
{<br />
"log-driver": "json-file",<br />
"log-opts": {<br />
"max-size": "10m",<br />
"max-file": "3"<br />
}<br />
}]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[普通用户运行Docker]]></title>
            <guid>349573aa38bc4745bbd197b4a1bd2f1d</guid>
            <pubDate>Mon, 15 Jan 2024 08:12:21 GMT</pubDate>
            <content:encoded><![CDATA[<h2 id="1创建docker组">1.创建docker组</h2>
<p><code>$sudo groupadd docker</code></p>
<h2 id="2-添加当前用户到docker组">2. 添加当前用户到docker组</h2>
<p><code>$sudo usermod -aG docker $USER</code></p>
<h2 id="3重新登录验证普通用户运行docker">3.重新登录验证普通用户运行docker</h2>
<p><code>$ docker run hello-world</code></p>
<p>##########################</p>
<p>如果在进行如上配置之前，已经使用sudo 运行了docker，可能会遇到如下错误:</p>
<div><pre class="hljs"><code>content_copy
WARNING: Error loading config <span class="hljs-keyword">file</span>: <span class="hljs-regexp">/home/u</span>ser<span class="hljs-regexp">/.docker/</span>config.json -
stat <span class="hljs-regexp">/home/u</span>ser<span class="hljs-regexp">/.docker/</span>config.json: permission denied
<span class="hljs-keyword">This</span> error indicates that the permission settings <span class="hljs-keyword">for</span> the ~<span class="hljs-regexp">/.docker/</span> directory are incorrect, due to having used the sudo command earlier.</code></pre></div>
<p>解决方法:<br />
1.删除 ~/.docker/ directory (会自动创建、但是个性化配置会丢失),<br />
2.或使用如下命令修改所有者和用户组:</p>
<div><pre class="hljs"><code>sudo <span class="hljs-keyword">chown</span> <span class="hljs-string">"$USER"</span>:<span class="hljs-string">"$USER"</span> /home/<span class="hljs-string">"$USER"</span>/.docker -R
sudo <span class="hljs-keyword">chmod</span> g+rwx <span class="hljs-string">"$HOME/.docker"</span> -R</code></pre></div>
]]></content:encoded>
        </item>
    </channel>
</rss>