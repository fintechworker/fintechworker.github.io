<!DOCTYPE html>
<html lang="zh">
<head>
<!-- head--->
    
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <meta charset="UTF-8">
	<meta name="keywords" content="IT,Linux,Docker,K8S,网络, Java, Python, XHTML, JavaScript">
	<meta name="keywords" content="IT民工,IT Worker">
	<meta name="description" content="IT技术分享">
    <!-- libs css-->
    <link rel="stylesheet" href="/_assets/css/bootstrap.css">
    <link rel="stylesheet" href="/_assets/css/tool.css">
    <!-- libs js -->
    <script src="/_assets/js/jquery-1.8.2.min.js"></script>
    <script src="/_assets/js/jquery.ba-hashchange.js"></script>
    <!--<script src="/_assets/js/onePage.js"></script>-->
    <script src="/_assets/js/tool.js"></script>
    <script src="/_assets/js/base.js"></script>
    <!-- style -->
    <link rel="stylesheet" href="/_assets/style.css">
    <link rel="stylesheet" href="/_assets/css/media.css">
	<meta name="keywords" content="Linux 系统精粹：深入解析 PROMPT_COMMAND 环境变量及其实用技巧-CSDN博客">
    <title>Linux 系统精粹：深入解析 PROMPT_COMMAND 环境变量及其实用技巧-CSDN博客-IT民工</title>
<link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
<body>
<!-- 头部 -->
<div class="header">
    <div class="container header-all phone">
        <div class="logo"><a href="/index.html"><img src="/_assets/images/logo.png"/></a></div>
        <div class="phone-show" id="phone-show">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <ul class="nav" id="header-nav">
		
		
		
          <li><a href="/index.html"><i class="iconfont">&#xe6cb;</i>首页</a></li>
        
		
          <li><a href="/archives.html"><i class="iconfont">&#xe690;</i>归档</a></li>
        
		
          <li><a href="/about.html"><i class="iconfont">&#xe69e;</i>关于</a></li>
        
		 
		
          <li><a href="/rss.xml"><i class="iconfont">&#xe6cb;</i>RSS</a></li>
          
	           
        </ul>
    </div>
</div>
<t></t>

<!-- 内容 -->
<div class="content container" data-content>
    <!-- 一级 -->
					
    <ul class="list row bj-white" id="list-1">
        <li class="title">
            <i class="iconfont c-hong">&#xe940;</i>热门推介<label>欢迎访问IT民工的网站！</label>
        </li>
        <div>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-1.jpg"/></a>
				
					<h3><a href="/article/00032.linux-prompt_command.html" >Linux 系统精粹：深入解析 PROMPT_COMMAND 环境变量及其实用技巧-CSDN博客</a></h3>

				
            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-2.jpg"/></a>
				
					<h3><a href="/article/cloudflare-vercel.html" >解决使用Cloudflare加速vercel“您的连接不是私密连接”问题解决</a></h3>
				
            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-3.jpg"/></a>
				
					<h3><a href="/article/009.dockerfile.html" >Dockerfile指令详解</a></h3>
				
            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-4.jpg"/></a>
				
					<h3><a href="/article/008.dockerfile.html" >Dockerfile 哪些命令会构建新的镜像层</a></h3>
				
				
            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-5.jpg"/></a>
				
					<h3><a href="/article/007.-dockerfile.html" >使用 Dockerfile 定制镜像</a></h3>
				
				
            </li>
        </div>
    </ul>
    <!-- 二级 -->
    <div class="love2" >

        <div class="left">
            <!-- 文章主体 -->
            <div class="contents">
                <div class="title">Linux 系统精粹：深入解析 PROMPT_COMMAND 环境变量及其实用技巧-CSDN博客</div>
                <div class="title_t">时间：2024-03-11 14:36丨编辑：<a href="/index.html">IT民工</a></div>
                <div class="ner">
                  <p>PROMPT_COMMAND 是 Linux 系统中一个非常有用的环境变量，它允许用户指定一个命令或一系列命令在显示每个主提示符之前执行。这个功能在许多方面都很有用，比如自定义提示信息、运行检查或日志记录等。在本文中，我们将深入探讨 PROMPT_COMMAND 的概念、用法以及一些实用的示例，帮助您更高效地使用 Linux 系统。</p>
<h4 id="1-prompt_command-简介">1. PROMPT_COMMAND 简介</h4>
<p>PROMPT_COMMAND 是 Bash shell 的一个环境变量。当设置了这个变量时，Bash 会在每次主提示符出现之前执行其值指定的命令。这为用户提供了一个强大的机制，用于增强和定制他们的命令行体验。</p>
<h4 id="2-prompt_command-的工作原理">2. PROMPT_COMMAND 的工作原理</h4>
<p>在 Bash 中，每次命令执行完毕后，shell 都会检查 PROMPT_COMMAND 环境变量。如果这个变量被设置了，Bash 会执行它的值指定的命令，然后再显示主提示符。这意味着我们可以使用 PROMPT_COMMAND 执行各种任务，比如更新环境变量、显示自定义消息、记录历史命令等。</p>
<h4 id="3-如何设置-prompt_command">3. 如何设置 PROMPT_COMMAND</h4>
<p>设置 PROMPT_COMMAND 非常简单。可以在命令行中直接设置它，也可以在 <code>.bashrc</code> 文件中设置它以便每次登录时自动应用。以下是一些设置 PROMPT_COMMAND 的例子：</p>
<div><pre class="hljs"><code>`# 直接在命令行中设置 <span class="hljs-keyword">export</span> PROMPT_COMMAND=<span class="hljs-string">'echo -n "当前时间: "; date'</span>  # 在 .bashrc 文件中设置 echo <span class="hljs-string">"export PROMPT_COMMAND='echo -n 当前路径: ; pwd'"</span> &gt;&gt; ~/.bashrc`
</code></pre></div>
<h4 id="4-实用的-prompt_command-示例">4. 实用的 PROMPT_COMMAND 示例</h4>
<h5 id="示例-1-显示当前时间">示例 1: 显示当前时间</h5>
<p>可以设置 PROMPT_COMMAND 以在每个提示符前显示当前时间。</p>
<div><pre class="hljs"><code>`export PROMPT_COMMAND='echo -n <span class="hljs-string">"当前时间: $(date "</span>+<span class="hljs-built_in">%H</span>:<span class="hljs-built_in">%M</span>:<span class="hljs-built_in">%S</span><span class="hljs-string">")"</span>'`</code></pre></div>
<h5 id="示例-2-自定义提示信息">示例 2: 自定义提示信息</h5>
<p>使用 PROMPT_COMMAND 来自定义shell 提示信息，显示更多有用信息。</p>
<div><pre class="hljs"><code>`export PROMPT_COMMAND='PS1=<span class="hljs-string">"在 $(pwd) [$(date "</span>+<span class="hljs-built_in">%H</span>:<span class="hljs-built_in">%M</span>:<span class="hljs-built_in">%S</span><span class="hljs-string">")]$ "</span>'`
</code></pre></div>
<h5 id="示例-3-命令执行时间">示例 3: 命令执行时间</h5>
<p>记录并显示上一个命令执行花费的时间。</p>
<div><pre class="hljs"><code>`<span class="hljs-built_in">export</span> <span class="hljs-attribute">PROMPT_COMMAND</span>=<span class="hljs-string">'echo -n "上个命令执行时间: $SECONDS 秒"'</span>`</code></pre></div>
<img width="962" height="962" src="/_resources/fe67129083a04ab8895a07df86155cfe.png" class="jop-noMdConv" />
<h4 id="5-注意事项和最佳实践">5. 注意事项和最佳实践</h4>
<ul>
<li><strong>避免复杂命令</strong>: 尽量不要在 PROMPT_COMMAND 中放置过于复杂或耗时的命令，这可能会影响命令行体验。</li>
<li><strong>备份</strong>: 在修改 <code>.bashrc</code> 或其他配置文件之前，建议先备份。</li>
<li><strong>测试</strong>: 在应用任何新的 PROMPT_COMMAND 设置之前，先在命令行中测试它们以确保它们按预期工作。</li>
</ul>
<h4 id="6-结论">6. 结论</h4>
<p>PROMPT_COMMAND 是 Bash shell 的一个强大特性，允许用户在显示每个主提示符之前执行特定的命令。无论我们是想自定义自己的提示信息，还是想记录和监控shell 活动，PROMPT_COMMAND 都能提供所需的灵活性和功能。通过上述示例和指导，我们能开始利用这个功能，使自己的 Linux 体验更加高效和愉快。</p>

                </div>
				<div style="padding:15px;">
				   <a href="javascript:;">
						
							标签: 
									<span >linux</span>
									
						</a>
				</div>
                <div class="label"> 转载请注明出处！--- IT民工 </div>
               
            </div>           
        </div>
	<!----侧边栏 --->
	        <div class="right" id="list-right">
            <!-- 关于我 -->
            <div class="thisMe">
                <div class="touPick">
				<img src="/_assets/images/aboutme.jpg" alt="图片走丢了" title="IT民工"></div>
				<ul>
                    <li><b style="font-size:20px;">IT民工</b></li>
                </ul>
				<br>
                <ul>
                    <li><a href="/index.html" style="text-decoration:none;" title="主页" class="iconfont">&#xe619;</a></li>
                    <li><a target="_blank" href="mailto:dliangliang@cock.li" title="联系我" style="text-decoration:none;" class="iconfont">&#xe667;</a></li>
                    <li><a href="/about.html" style="text-decoration:none;" title="关于我" class="iconfont">&#xe645;</a></li>
                </ul>
            </div>
            <!-- 建站史 -->
            <div class="ku">
                <div class="title">建站史</div>
                <div class="shus">
                    <div class="line"></div>
                    <div class="shus-cont">
                        <a>Joplin</a><br>
                        <a>MarkDown</a><br>
                        <a>Pages Publisher</a><br>
                        <a>GitHub Pages</a><br>
                        <a>Cloudflare Pages</a><br>
                        <a>Vercel Project</a><br>
                        <a href="javascript:;" class="href-all">查看全部</a>
                    </div>
                </div>
            </div>
   
            <!-- 标签云 -->
            <div class="labels" id="labels">
                <div class="title">标签云</div>
                <a>打工狗</a>
                <a>代码奴</a>
                <a>金融嗜好</a>
                <a>X瘾患者</a>
                <a>偶尔撸B</a>
                <a>精分患者</a>
                <a>软肋不少</a>
                <a>喜历史</a>
            </div>
            <!-- 友情链接 -->
            <div class="ku">
                <div class="title">左邻右舍</div>
                <div class="neighbor">
                    <a target="_blank" href="https://www.zhihu.com/people/economicsshare" title="知乎：巴甫洛夫的实验">知乎：巴甫洛夫的实验</a>
                    <a target="_blank" href="https://space.bilibili.com/18059632" title="B站：巴甫洛夫的实验">B站：巴甫洛夫的实验</a>
                    <a target="_blank" href="https://author.baidu.com/home?from=bjh_article&app_id=1790832269223398" title="百家号：巴甫洛夫的实验">百家号：巴甫洛夫的实验</a>                  
                    <a target="_blank" href="https://fintechworker.20160808.xyz" title="IT民工 On Cloudflare">IT民工&nbsp;On&nbsp;Cloudflare</a>                  
                    <a target="_blank" href="https://fintechworker.github.io" title="IT民工 On GitHub">IT民工&nbsp;On&nbsp;GitHub</a>                  
                    <a target="_blank" href="https://fintechworker-github-io.vercel.app" title="IT民工 On Vercel">IT民工&nbsp;On&nbsp;Vercel</a>                  
                
				</div>
            </div>
			 <!-- 建站史 -->
            <div class="ku" style="height:300px;">
                <div class="title">有点懒啊！</div>
                <div class="neighbor" >
他有点懒啊！
				</div>
            </div>
        </div>

    </div>
</div>
<!-- 底部 -->
<div class="footer">
    Design by <a href="#">IT民工</a>
    <br>&copy; <script> document.write(new Date().getFullYear()); </script> <a href="#">IT民工</a>
</div>

<!-- 侧边栏 -->

<div class="ce">
    <a class="ceL" href="#" title="返回顶部"><i class="iconfont top">&#xe65b;</i></a>
</div>


</body>
</html>
