<!DOCTYPE html>
<html lang="zh">
<head>
<!-- head--->
    
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <meta charset="UTF-8">
	<meta name="keywords" content="IT,Linux,Docker,K8S,网络, Java, Python, XHTML, JavaScript">
	<meta name="description" content="IT技术分享">
    <!-- libs css-->
    <link rel="stylesheet" href="/_assets/css/bootstrap.css">
    <link rel="stylesheet" href="/_assets/css/tool.css">
    <!-- libs js -->
    <script src="/_assets/js/jquery-1.8.2.min.js"></script>
    <script src="/_assets/js/jquery.ba-hashchange.js"></script>
    <!--<script src="/_assets/js/onePage.js"></script>-->
    <script src="/_assets/js/tool.js"></script>
    <script src="/_assets/js/base.js"></script>
    <!-- style -->
    <link rel="stylesheet" href="/_assets/style.css">
    <link rel="stylesheet" href="/_assets/css/media.css">
	<meta name="keywords" content="00019.xargs命令">
    <title>00019.xargs命令</title>
</head>
<body>
<!-- 头部 -->
<div class="header">
    <div class="container header-all phone">
        <div class="logo"><img src="/_assets/images/logo.png"/></div>
        <div class="phone-show" id="phone-show">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <ul class="nav" id="header-nav">
		
		
		
          <li><a href="/index"><i class="iconfont">&#xe6cb;</i>首页</a></li>
        
		
          <li><a href="/archives"><i class="iconfont">&#xe690;</i>归档</a></li>
        
		
          <li><a href="/about"><i class="iconfont">&#xe69e;</i>关于</a></li>
        
		 
		
          <li><a href="/rss.xml"><i class="iconfont">&#xe6cb;</i>RSS</a></li>
          
	           
        </ul>
    </div>
</div>
<t></t>

<!-- 内容 -->
<div class="content container" data-content>
    <!-- 一级 -->
    <ul class="list row bj-white" id="list-1">
        <li class="title">
            <i class="iconfont c-hong">&#xe940;</i>热门推介<label>欢迎访问IT民工的网站！</label>
        </li>
        <div>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-1.jpg"/></a>
				<h3><a href="javascript:;">美丽的向日葵</a></h3>

            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-2.jpg"/></a>
				<h3><a href="javascript:;">枫叶山</a></h3>

            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-3.jpg"/></a>
				<h3><a href="javascript:;">大峡谷</a></h3>

            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-4.jpg"/></a>
				<h3><a href="javascript:;">吊桥</a></h3>
            </li>
            <li class="cont-req">
                <a class="t1_pick"><img src="/_assets/images/header-img-5.jpg"/></a>
				<h3><a href="javascript:;">花朵</a></h3>
            </li>
        </div>
    </ul>

    <!-- 二级 -->
    <div class="love2" >

        <div class="left">
            <!-- 文章主体 -->
            <div class="contents">
                <div class="title">00019.xargs命令</div>
                <div class="title_t">时间：2024-01-23 11:13丨编辑：<a href="/index">IT民工</a></div>
                <div class="ner">
                  <p>例子：</p>
<h1 id="中控机执行命令">中控机执行命令</h1>
<p>echo bkssm bkiam usermgr paas cmdb gse job consul bklog | xargs -n 1 ./bkcli check</p>
<p>详解：<br />
xargs（英文全拼： eXtended ARGuments）是给命令传递参数的一个过滤器，也是组合多个命令的一个工具。<br />
xargs 可以将管道或标准输入（stdin）数据转换成命令行参数，也能够从文件的输出中读取数据。<br />
xargs 也可以将单行或多行文本输入转换为其他格式，例如多行变单行，单行变多行。<br />
xargs 默认的命令是 echo，这意味着通过管道传递给 xargs 的输入将会包含换行和空白，不过通过 xargs 的处理，换行和空白将被空格取代。<br />
xargs 是一个强有力的命令，它能够捕获一个命令的输出，然后传递给另外一个命令。<br />
之所以能用到这个命令，关键是由于很多命令不支持|管道来传递参数，而日常工作中有有这个必要，所以就有了 xargs 命令，例如：<br />
find /sbin -perm +700 |ls -l       #这个命令是错误的<br />
find /sbin -perm +700 |xargs ls -l   #这样才是正确的<br />
xargs 一般是和管道一起使用。<br />
命令格式：<br />
somecommand |xargs -item  command<br />
参数：<br />
-a file 从文件中读入作为 stdin<br />
-e flag ，注意有的时候可能会是-E，flag必须是一个以空格分隔的标志，当xargs分析到含有flag这个标志的时候就停止。<br />
-p 当每次执行一个argument的时候询问一次用户。<br />
-n num 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。<br />
-t 表示先打印命令，然后再执行。<br />
-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 {}，可以用 {} 代替。<br />
-r no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了。<br />
-s num 命令行的最大字符数，指的是 xargs 后面那个命令的最大命令行字符数。<br />
-L num 从标准输入一次读取 num 行送给 command 命令。<br />
-l 同 -L。<br />
-d delim 分隔符，默认的xargs分隔符是回车，argument的分隔符是空格，这里修改的是xargs的分隔符。<br />
-x exit的意思，主要是配合-s使用。。<br />
-P 修改最大的进程数，默认是1，为0时候为as many as it can ，这个例子我没有想到，应该平时都用不到的吧。<br />
实例<br />
xargs 用作替换工具，读取输入数据重新格式化后输出。<br />
定义一个测试文件，内有多行文本数据：</p>
<h1 id="cat-testtxt">cat test.txt</h1>
<p>a b c d e f g<br />
h i j k l m n<br />
o p q<br />
r s t<br />
u v w x y z<br />
多行输入单行输出：</p>
<h1 id="cat-testtxt-xargs">cat test.txt | xargs</h1>
<p>a b c d e f g h i j k l m n o p q r s t u v w x y z<br />
-n 选项多行输出：</p>
<h1 id="cat-testtxt-xargs-n3">cat test.txt | xargs -n3</h1>
<p>a b c<br />
d e f<br />
g h i<br />
j k l<br />
m n o<br />
p q r<br />
s t u<br />
v w x<br />
y z<br />
-d 选项可以自定义一个定界符：</p>
<h1 id="echo-namexnamexnamexname-xargs-dx">echo "nameXnameXnameXname" | xargs -dX</h1>
<p>name name name name<br />
结合 -n 选项使用：</p>
<h1 id="echo-namexnamexnamexname-xargs-dx-n2">echo "nameXnameXnameXname" | xargs -dX -n2</h1>
<p>name name<br />
name name<br />
读取 stdin，将格式化后的参数传递给命令<br />
假设一个命令为 sk.sh 和一个保存参数的文件 arg.txt：<br />
#!/bin/bash<br />
#sk.sh命令内容，打印出所有参数。</p>
<p>echo $*<br />
arg.txt文件内容：</p>
<h1 id="cat-argtxt">cat arg.txt</h1>
<p>aaa<br />
bbb<br />
ccc<br />
xargs 的一个选项 -I，使用 -I 指定一个替换字符串 {}，这个字符串在 xargs 扩展时会被替换掉，当 -I 与 xargs 结合使用，每一个参数命令都会被执行一次：</p>
<h1 id="cat-argtxt-xargs-i-sksh-p-l">cat arg.txt | xargs -I {} ./sk.sh -p {} -l</h1>
<p>-p aaa -l<br />
-p bbb -l<br />
-p ccc -l<br />
复制所有图片文件到 /data/images 目录下：<br />
ls <em>.jpg | xargs -n1 -I {} cp {} /data/images<br />
xargs 结合 find 使用<br />
用 rm 删除太多的文件时候，可能得到一个错误信息：/bin/rm Argument list too long. 用 xargs 去避免这个问题：<br />
find . -type f -name "</em>.log" -print0 | xargs -0 rm -f<br />
xargs -0 将 \0 作为定界符。<br />
统计一个源代码目录中所有 php 文件的行数：<br />
find . -type f -name "<em>.php" -print0 | xargs -0 wc -l<br />
查找所有的 jpg 文件，并且压缩它们：<br />
find . -type f -name "</em>.jpg" -print | xargs tar -czvf images.tar.gz<br />
xargs 其他应用<br />
假如你有一个文件包含了很多你希望下载的 URL，你能够使用 xargs下载所有链接：</p>
<h1 id="cat-url-listtxt-xargs-wget-c">cat url-list.txt | xargs wget -c</h1>

                </div>
                <div class="label"> 转载请注明出处！--- IT民工 </div>
                <div class="next">
                    <a href="javascript:;">
						</a>
                </div>
            </div>           
        </div>
        <div class="right" >
            <!-- 关于我 -->
            <div class="thisMe">
                <div class="touPick">
				<p> IT 民工 </p>
				<img src="/_assets/images/aboutme.jpg" alt="图片走丢了" title="IT民工"></div>
                <ul>
                    <li><a href="/index" style="text-decoration:none;" title="主页" class="iconfont">&#xe619;</a></li>
                    <li><a target="_blank" href="mailto:dliangliang@cock.li" title="联系我" style="text-decoration:none;" class="iconfont">&#xe667;</a></li>
                    <li><a href="/about" style="text-decoration:none;" title="关于我" class="iconfont">&#xe645;</a></li>
                </ul>
            </div>
            <!-- 建站史 -->
            <div class="ku">
                <div class="title">建站史</div>
                <div class="shus">
                    <div class="line"></div>
                    <div class="shus-cont">
                        <a>Joplin</a><br>
                        <a>MarkDown</a><br>
                        <a>Pages Publisher</a><br>
                        <a>GitHub Pages</a><br>
                        <a>Cloudflare Pages</a><br>
                        <a>Vercel Project</a><br>
                        <a href="javascript:;" class="href-all">查看全部</a>
                    </div>
                </div>
            </div>
   
            <!-- 标签云 -->
            <div class="labels" id="labels">
                <div class="title">标签云</div>
                <a>打工狗</a>
                <a>代码奴</a>
                <a>金融嗜好</a>
                <a>X瘾患者</a>
                <a>偶尔撸B</a>
                <a>精分患者</a>
                <a>软肋不少</a>
                <a>喜历史</a>
            </div>
            <!-- 友情链接 -->
            <div class="ku">
                <div class="title">左邻右舍</div>
                <div class="neighbor">
                    <a target="_blank" href="https://www.zhihu.com/people/economicsshare" title="知乎：巴甫洛夫的实验">知乎：巴甫洛夫的实验</a>
                    <a target="_blank" href="https://space.bilibili.com/18059632" title="B站：巴甫洛夫的实验">B站：巴甫洛夫的实验</a>
                    <a target="_blank" href="https://author.baidu.com/home?from=bjh_article&app_id=1790832269223398" title="百家号：巴甫洛夫的实验">百家号：巴甫洛夫的实验</a>                  
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 底部 -->
<div class="footer">
    Design by <a href="#">IT民工</a>
    <br>&copy; <script> document.write(new Date().getFullYear()); </script> <a href="#">IT民工</a>
</div>
<!-- 侧边栏 -->
<div class="ce">
    <a class="ceL" href="#" title="返回顶部"><i class="iconfont top">&#xe65b;</i></a>
</div>

</body>
</html>
